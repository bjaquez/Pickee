"use strict";$(document).ready(function(){var t=localStorage.getItem("date"),o=localStorage.getItem("budget"),e=localStorage.getItem("city");$(".show-budget").text(o),$.ajax({url:"https://app.ticketmaster.com/discovery/v2/events.json?apikey=6mHrAZ3CTRq1nKViJch0zM8cMGHPzav6&classificationName=music&size=50&city="+e+"&startDate="+t,method:"GET"}).then(function(t){var i=t._embedded.events.filter(function(t){return t.priceRanges}).filter(function(t){return t.priceRanges[0].max<=o});i=i.slice(0,12),$(".carouselConcerts .carousel-item .concert").each(function(t){var e=i[t].images.findIndex(function(t){return 205===t.width}),a=i[t].images[e].url,n=i[t].url,r=i[t].priceRanges[0].min,c=i[t].name,s=i[t].dates.start.localDate;$(this).find("img").attr("src",a),$(this).append('\n            <p><a href= "'.concat(n,'" class="data-url-link" target = \'_blank\'>').concat(c,"</a></p>\n            <h5>").concat(s,"</h5> \n            <h5>$").concat(r,'<button style=\'margin-left: 70px;\' class = "btn btn-sm btn-outline-danger favorite" event-image ="').concat(a,'" event-name = "').concat(c,'" event-price = "').concat(r,'" event-url = "').concat(n,"\"><i class='far fa-heart'></i></button></h5>\n        "))})});var l=[],u=0,p={},d=!1,m=localStorage.getItem("favs"),v=m?JSON.parse(m):[];function f(t,e){return t+e}$(".total").text(u),0<v.length&&$(v).each(function(t){var e=$("<div class='chosen-div'>"),a=$('<span data-id="'.concat(v[t].count,'">')),n=$("<img class='img-picked' />").attr("src",v[t].image),r=$('\n                <h6 class="favorite-title">\n                    <p>\n                        <a href="'.concat(v[t].url,'" target="_blank">').concat(v[t].name,"</a>\n                    </p>\n                </h6>\n            ")),c=$('<h6 class="favorite-title">$'.concat(v[t].price," x ").concat(v[t].count,"</h6>"));if(c.append(a),e.attr("chosen-price",v[t].price),e.append(n,r,c),l.push(parseFloat(v[t].price*v[t].count)),u=l.reduce(f,0),$(".total").text(u),$(".picked-events").append(e),$(".picked-events").show(),u>parseFloat(o)&&!d){var s=$("<p class='budget over'>").text("Over Budget!");d=!0,$(".budget").append(s),$(".picked-events").addClass("over-budget")}}),$(document).on("click",".favorite",function(){$(".picked-events").show();var t=$("<div class = chosen-div>"),e=$("<span data-id = '"+$(this).attr("event-name").replace("'","")+"'>"),a=$("<img class = 'img-picked'>").attr("src",$(this).attr("event-image")),n=$("<h6 class = 'favorite-title'>").append('\n        <p><a class = "data-url-link-2" href= "'.concat($(this).attr("event-url"),"\" target = '_blank'>").concat($(this).attr("event-name"),"</a></p> \n        ")),r=$("<h6 class = 'favorite-title'>").text("$"+$(this).attr("event-price")+" x ");r.append(e),t.attr("chosen-price",$(this).attr("event-price")),t.append(a,n,r),m=localStorage.getItem("favs"),v=m?JSON.parse(m):v;var c=$(this).attr("event-name");if(c in p&&p.hasOwnProperty(c)){p[c]++,$("span[data-id = '"+c.replace("'","")+"']").text(p[c]);var s=v.findIndex(function(t){return t.name===c});v[s].count+=1}else p[c]=1,$(".picked-events").append(t),e.text(p[c]),v.push({image:$(this).attr("event-image"),name:c,price:$(this).attr("event-price"),url:$(this).attr("event-url"),count:p[c]});if(localStorage.setItem("favs",JSON.stringify(v)),e.text(p[$(this).attr("event-name")]),l.push(parseFloat(t.attr("chosen-price"))),u=l.reduce(f,0),$(".total").text(u),u>parseFloat(o)&&!1===d){d=!0;var i=$("<p class = 'budget over'>").text("Over Budget!");$(".over").append(i),$(".picked-events").addClass("over-budget")}}),$(document).on("click",".clear",function(){$(".picked-events").empty(),$(".picked-events").hide(),$(".over").empty(),$(".picked-events").removeClass("over-budget"),d=!1,l=[],u=0,p={},$(".total").text(u),localStorage.removeItem("favs"),v=[]}),$.ajax({url:"https://app.ticketmaster.com/discovery/v2/events.json?apikey=ugXRSfv8iRIcixf8XbiSrD0iIgYgOHFq&classificationName=sports&size=50&city="+e+"&startDate="+t,method:"GET"}).then(function(t){var i=t._embedded.events.filter(function(t){return t.priceRanges}).filter(function(t){return t.priceRanges[0].min<=o});i=i.slice(0,12),$(".carouselSports .carousel-item .sports").each(function(t){var e=i[t].images.findIndex(function(t){return 205===t.width}),a=i[t].images[e].url,n=i[t].url,r=i[t].priceRanges[0].min,c=i[t].name,s=i[t].dates.start.localDate;$(this).find("img").attr("src",a),$(this).append('\n            <p><a href= "'.concat(n,'" class ="data-url-link" target = \'_blank\'>').concat(c,"</a></p>\n            <h5>").concat(s,"</h5> \n            <h5>$").concat(r,"<button style='margin-left: 70px;' class = 'btn btn-sm btn-outline-danger favorite' event-image =\"").concat(a,'" event-name = "').concat(c,'" event-price = "').concat(r,'" event-url = "').concat(n,"\"><i class='far fa-heart'></i></button> </h5>\n        "))})})}),$(document).ready(function(){$("#submit_button").click(function(){localStorage.removeItem("favs");var t=$("#dateInput").val(),e=$("#budgetInput option:selected").val(),a=$("#cityInput").val(),n=/^\d{4}\-(0[1-9]|1[0-2])\-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i.test(t);n?($("#dateInput").removeClass("wrong-input"),$(".c-date").empty(),$(".submit").attr("href","homepage.html"),localStorage.setItem("date",t)):($("#dateInput").addClass("wrong-input"),$("#dateInput").attr("placeholder","YYYY-MM-DD"),$(".c-date").text("Incorrect date format"),$(".submit").attr("href","#"),event.preventDefault()),(n=/^\w{2,}(\s\w{2,}){0,2}$/i.test(a))?($("#cityInput").removeClass("wrong-input"),$(".c-city").empty(),$(".submit").attr("href","homepage.html"),localStorage.setItem("city",a)):($("#cityInput").addClass("wrong-input"),$(".c-city").text("Invalid city"),$(".submit").attr("href","#"),event.preventDefault()),"Select budget"===e?($("#budgetInput").addClass("wrong-input"),$(".c-budget").text("Choose Budget"),$(".submit").attr("href","#"),event.preventDefault()):($("#budgetInput").removeClass("wrong-input"),$(".c-budget").empty(),$(".submit").attr("href","homepage.html"),localStorage.setItem("budget",e))})}),$(document).ready(function(){$(".nav-restaurants").click(function(){$("html,body").animate({scrollTop:$(".nav2-restaurants").offset().top},"slow")}),$(".nav-concerts").click(function(){$("html,body").animate({scrollTop:$(".nav2-concerts").offset().top},"slow")}),$(".nav-sporting-events").click(function(){$("html,body").animate({scrollTop:$(".nav2-sporting-events").offset().top},"slow")}),$(".data-home-footer").click(function(){$("html,body").animate({scrollTop:$(".data-home").offset().top},"slow")}),$(".nav-cart").click(function(){$("html,body").animate({scrollTop:$(".shopping-cart").offset().top},"slow")}),$(".disclaimer").click(function(){$("#myInput").trigger("focus")})});var userParams={location:localStorage.getItem("city"),maxBudget:localStorage.getItem("budget")},dollars={$:8,$$:15,$$$:40,$$$$:61},restaurantColumns=$(".carouselRestaurants .business"),getBusinessesWithPrices=function(t){return t.filter(function(t){return t.price})},sortYelpBusinesses=function(t){var e=t.slice();return e.sort(function(t,e){if(e.rating<t.rating)return-1;if(t.rating<e.rating)return 1;if(t.price&&e.price){if(e.price>t.price)return-1;if(t.price>e.price)return 1}return 0}),e.splice(0,12)},appendYelpBusinessElements=function(i){restaurantColumns.each(function(t){var e=i[t],a=e.rating,n=e.url,r=e.image_url,c=e.price,s=e.name;c=c?dollars[c]:"No Price",$(this).find("img").attr("src",r),$(this).append('\n            <p class="my-0">\n                <a href="'.concat(n,'" class="data-url-link" target="_blank">').concat(s,'</a>\n            </p>\n            <p class="my-0">Rating: ').concat(a,'</p>\n            <p class="my-0">Price: $').concat(c.toFixed(2),'\n                <button style="margin-left: 70px;" class="btn btn-sm btn-outline-danger favorite" event-image="').concat(r,'" event-name="').concat(s,'" event-price="').concat(c,'" event-url = "').concat(n,'"><i class="far fa-heart"></i></button>\n            </p>\n        '))})},getSortCreateYelpBusinessElements=function(t){var e=encodeURI(t.location),a="https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=food&location=".concat(e);$.ajax({url:a,method:"GET",headers:{Authorization:"Bearer EJvbHZiIs5OmP2i5jEPAjK0KB_29Wfx32FSli4YZvCVm4Gk6No0ahTnITakE3XdySd5oVBrVAAMnOIekQUe4dTRbRLsRFp--ND9BPuY7WbBqiGcsulqlu6XI3oWRW3Yx"}}).then(function(t){var e=t.businesses,a=getBusinessesWithPrices(e),n=sortYelpBusinesses(a);appendYelpBusinessElements(n)})};getSortCreateYelpBusinessElements(userParams);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImxvZ2ljX2Zyb250cGFnZS5qcyIsImxvZ2ljX2hvbWVwYWdlLmpzIiwieWVscC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImRhdGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiYnVkZ2V0IiwiY2l0eSIsInRleHQiLCJhamF4IiwidXJsIiwibWV0aG9kIiwidGhlbiIsInJlc3BvbnNlIiwiZXZlbnRzSW5CdWRnZXQiLCJfZW1iZWRkZWQiLCJldmVudHMiLCJmaWx0ZXIiLCJldmVudCIsInByaWNlUmFuZ2VzIiwibWF4Iiwic2xpY2UiLCJlYWNoIiwiaSIsImltYWdlSW5kZXgiLCJpbWFnZXMiLCJmaW5kSW5kZXgiLCJpbWFnZSIsIndpZHRoIiwiZXZlbnRJbWFnZSIsImV2ZW50VXJsIiwiZXZlbnRQcmljZSIsIm1pbiIsImV2ZW50TmFtZSIsIm5hbWUiLCJldmVudERhdGUiLCJkYXRlcyIsInN0YXJ0IiwibG9jYWxEYXRlIiwidGhpcyIsImZpbmQiLCJhdHRyIiwiYXBwZW5kIiwiY29uY2F0IiwiY2hvc2VuUHJpY2VzIiwidG90YWwiLCJmYXZvcml0ZXMiLCJvdmVyIiwiZmF2U3RyaW5nIiwiZmF2cyIsIkpTT04iLCJwYXJzZSIsImFkZCIsImEiLCJiIiwibGVuZ3RoIiwiaW5kZXgiLCIkZGl2IiwiJGNvdW50ZXIiLCJjb3VudCIsIiRmYXZJbWFnZSIsIiRmYXZUaXRsZSIsIiRmYXZQcmljZSIsInByaWNlIiwicHVzaCIsInBhcnNlRmxvYXQiLCJyZWR1Y2UiLCJzaG93Iiwib3ZlckJ1ZGdldCIsImFkZENsYXNzIiwib24iLCJldmVudERpdiIsImNvdW50ZXIiLCJyZXBsYWNlIiwiZXZlbnRDaG9zZW4iLCJldmVudFRpdGxlIiwiZXZlbnROYW1lU3RyaW5nIiwiaGFzT3duUHJvcGVydHkiLCJmYXYiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZW1wdHkiLCJoaWRlIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVJdGVtIiwiY2xpY2siLCJkYXRlX2lucHV0IiwidmFsIiwiYnVkZ2V0X2lucHV0IiwiY2l0eV9pbnB1dCIsInZhbGlkIiwidGVzdCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsInRyaWdnZXIiLCJ1c2VyUGFyYW1zIiwibG9jYXRpb24iLCJtYXhCdWRnZXQiLCJkb2xsYXJzIiwiJCQiLCIkJCQiLCIkJCQkIiwicmVzdGF1cmFudENvbHVtbnMiLCJnZXRCdXNpbmVzc2VzV2l0aFByaWNlcyIsImJ1c2luZXNzZXMiLCJidXNpbmVzcyIsInNvcnRZZWxwQnVzaW5lc3NlcyIsImJ5QmVzdFJhdGluZyIsInNvcnQiLCJyYXRpbmciLCJzcGxpY2UiLCJhcHBlbmRZZWxwQnVzaW5lc3NFbGVtZW50cyIsIl9idXNpbmVzc2VzJGluZGV4IiwiaW1hZ2VfdXJsIiwidG9GaXhlZCIsImdldFNvcnRDcmVhdGVZZWxwQnVzaW5lc3NFbGVtZW50cyIsImVuY29kZWRMb2NhdGlvbiIsImVuY29kZVVSSSIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwicmVzIiwiYnVzaW5lc3Nlc1dpdGhQcmljZXMiLCJzb3J0ZWRCdXNpbmVzc2VzIl0sIm1hcHBpbmdzIjoiYUFBQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUdkLElBQUlDLEVBQU9DLGFBQWFDLFFBQVEsUUFDNUJDLEVBQVNGLGFBQWFDLFFBQVEsVUFDOUJFLEVBQU9ILGFBQWFDLFFBQVEsUUFFaENMLEVBQUUsZ0JBQWdCUSxLQUFLRixHQUV2Qk4sRUFBRVMsS0FBSyxDQUNIQyxJQUFLLHVJQUF5SUgsRUFBTyxjQUFnQkosRUFDcktRLE9BQVEsUUFDVEMsS0FBSyxTQUFVQyxHQUVkLElBTUlDLEVBTmNELEVBQVNFLFVBQVVDLE9BRUdDLE9BQU8sU0FBVUMsR0FDckQsT0FBT0EsRUFBTUMsY0FHMEJGLE9BQU8sU0FBVUMsR0FDeEQsT0FBT0EsRUFBTUMsWUFBWSxHQUFHQyxLQUFPZCxJQUd2Q1EsRUFBaUJBLEVBQWVPLE1BQU0sRUFBRyxJQUVkckIsRUFBRSw2Q0FFUnNCLEtBQUssU0FBVUMsR0FDaEMsSUFBSUMsRUFBYVYsRUFBZVMsR0FBR0UsT0FBT0MsVUFBVSxTQUFVQyxHQUMxRCxPQUF1QixNQUFoQkEsRUFBTUMsUUFFYkMsRUFBYWYsRUFBZVMsR0FBR0UsT0FBT0QsR0FBWWQsSUFDbERvQixFQUFXaEIsRUFBZVMsR0FBR2IsSUFDN0JxQixFQUFhakIsRUFBZVMsR0FBR0osWUFBWSxHQUFHYSxJQUM5Q0MsRUFBWW5CLEVBQWVTLEdBQUdXLEtBQzlCQyxFQUFZckIsRUFBZVMsR0FBR2EsTUFBTUMsTUFBTUMsVUFDOUN0QyxFQUFFdUMsTUFBTUMsS0FBSyxPQUFPQyxLQUFLLE1BQU9aLEdBQ2hDN0IsRUFBRXVDLE1BQU1HLE9BQVIsOEJBQUFDLE9BQ2ViLEVBRGYsZ0RBQUFhLE9BQ29FVixFQURwRSw4QkFBQVUsT0FFTVIsRUFGTiw2QkFBQVEsT0FHT1osRUFIUCx3R0FBQVksT0FHc0hkLEVBSHRILG9CQUFBYyxPQUdtSlYsRUFIbkoscUJBQUFVLE9BR2dMWixFQUhoTCxtQkFBQVksT0FHNE1iLEVBSDVNLGdFQVVSLElBQUljLEVBQWUsR0FDZkMsRUFBUSxFQUNSQyxFQUFZLEdBQ1pDLEdBQU8sRUFDUEMsRUFBWTVDLGFBQWFDLFFBQVEsUUFDakM0QyxFQUFPRCxFQUFZRSxLQUFLQyxNQUFNSCxHQUFhLEdBNEcvQyxTQUFTSSxFQUFJQyxFQUFHQyxHQUNaLE9BQU9ELEVBQUlDLEVBM0dmdEQsRUFBRSxVQUFVUSxLQUFLcUMsR0FFQyxFQUFkSSxFQUFLTSxRQUNMdkQsRUFBRWlELEdBQU0zQixLQUFLLFNBQVNrQyxHQUNsQixJQUFJQyxFQUFPekQsRUFBRSw0QkFDVDBELEVBQVcxRCxFQUFDLGtCQUFBMkMsT0FBbUJNLEVBQUtPLEdBQU9HLE1BQS9CLE9BQ1pDLEVBQVk1RCxFQUFFLDhCQUE4QnlDLEtBQUssTUFBT1EsRUFBS08sR0FBTzdCLE9BQ3BFa0MsRUFBWTdELEVBQUMsNEdBQUEyQyxPQUdNTSxFQUFLTyxHQUFPOUMsSUFIbEIsc0JBQUFpQyxPQUcwQ00sRUFBS08sR0FBT3RCLEtBSHRELHdFQU9iNEIsRUFBWTlELEVBQUMsK0JBQUEyQyxPQUFnQ00sRUFBS08sR0FBT08sTUFBNUMsT0FBQXBCLE9BQXVETSxFQUFLTyxHQUFPRyxNQUFuRSxVQWNqQixHQVpBRyxFQUFVcEIsT0FBT2dCLEdBQ2pCRCxFQUFLaEIsS0FBSyxlQUFnQlEsRUFBS08sR0FBT08sT0FDdENOLEVBQUtmLE9BQU9rQixFQUFXQyxFQUFXQyxHQUVsQ2xCLEVBQWFvQixLQUFLQyxXQUFXaEIsRUFBS08sR0FBT08sTUFBUWQsRUFBS08sR0FBT0csUUFDN0RkLEVBQVFELEVBQWFzQixPQUFPZCxFQUFLLEdBQ2pDcEQsRUFBRSxVQUFVUSxLQUFLcUMsR0FHakI3QyxFQUFFLGtCQUFrQjBDLE9BQU9lLEdBQzNCekQsRUFBRSxrQkFBa0JtRSxPQUVoQnRCLEVBQVFvQixXQUFXM0QsS0FBWXlDLEVBQU0sQ0FDckMsSUFBSXFCLEVBQWFwRSxFQUFFLDJCQUEyQlEsS0FBSyxnQkFDbkR1QyxHQUFPLEVBQ1AvQyxFQUFFLFdBQVcwQyxPQUFPMEIsR0FDcEJwRSxFQUFFLGtCQUFrQnFFLFNBQVMsa0JBS3pDckUsRUFBRUMsVUFBVXFFLEdBQUcsUUFBUyxZQUFhLFdBQ2pDdEUsRUFBRSxrQkFBa0JtRSxPQUNwQixJQUFJSSxFQUFXdkUsRUFBRSw0QkFDYndFLEVBQVV4RSxFQUFFLG9CQUFzQkEsRUFBRXVDLE1BQU1FLEtBQUssY0FBY2dDLFFBQVEsSUFBSyxJQUFNLE1BQ2hGQyxFQUFjMUUsRUFBRSw4QkFBOEJ5QyxLQUFLLE1BQU96QyxFQUFFdUMsTUFBTUUsS0FBSyxnQkFDdkVrQyxFQUFhM0UsRUFBRSxpQ0FBaUMwQyxPQUFuQyxvREFBQUMsT0FDd0IzQyxFQUFFdUMsTUFBTUUsS0FBSyxhQURyQyx5QkFBQUUsT0FDd0UzQyxFQUFFdUMsTUFBTUUsS0FBSyxjQURyRix3QkFHYlYsRUFBYS9CLEVBQUUsaUNBQWlDUSxLQUFLLElBQU1SLEVBQUV1QyxNQUFNRSxLQUFLLGVBQWlCLE9BQzdGVixFQUFXVyxPQUFPOEIsR0FDbEJELEVBQVM5QixLQUFLLGVBQWdCekMsRUFBRXVDLE1BQU1FLEtBQUssZ0JBQzNDOEIsRUFBUzdCLE9BQU9nQyxFQUFhQyxFQUFZNUMsR0FFekNpQixFQUFZNUMsYUFBYUMsUUFBUSxRQUNqQzRDLEVBQU9ELEVBQVlFLEtBQUtDLE1BQU1ILEdBQWFDLEVBRTNDLElBQUkyQixFQUFrQjVFLEVBQUV1QyxNQUFNRSxLQUFLLGNBRW5DLEdBQUltQyxLQUFtQjlCLEdBQWFBLEVBQVUrQixlQUFlRCxHQUFrQixDQUMzRTlCLEVBQVU4QixLQUNWNUUsRUFBRSxtQkFBcUI0RSxFQUFnQkgsUUFBUSxJQUFJLElBQUksTUFBTWpFLEtBQUtzQyxFQUFVOEIsSUFFNUUsSUFBSXBCLEVBQVFQLEVBQUt2QixVQUFVLFNBQUNvRCxHQUFELE9BQVNBLEVBQUk1QyxPQUFTMEMsSUFDakQzQixFQUFLTyxHQUFPRyxPQUFTLE9BRXJCYixFQUFVOEIsR0FBbUIsRUFDN0I1RSxFQUFFLGtCQUFrQjBDLE9BQU82QixHQUMzQkMsRUFBUWhFLEtBQUtzQyxFQUFVOEIsSUFFdkIzQixFQUFLZSxLQUFLLENBQ05yQyxNQUFPM0IsRUFBRXVDLE1BQU1FLEtBQUssZUFDcEJQLEtBQU0wQyxFQUNOYixNQUFPL0QsRUFBRXVDLE1BQU1FLEtBQUssZUFDcEIvQixJQUFLVixFQUFFdUMsTUFBTUUsS0FBSyxhQUNsQmtCLE1BQU9iLEVBQVU4QixLQVl6QixHQVJBeEUsYUFBYTJFLFFBQVEsT0FBUTdCLEtBQUs4QixVQUFVL0IsSUFFNUN1QixFQUFRaEUsS0FBS3NDLEVBQVU5QyxFQUFFdUMsTUFBTUUsS0FBSyxnQkFFcENHLEVBQWFvQixLQUFLQyxXQUFXTSxFQUFTOUIsS0FBSyxrQkFDM0NJLEVBQVFELEVBQWFzQixPQUFPZCxFQUFLLEdBQ2pDcEQsRUFBRSxVQUFVUSxLQUFLcUMsR0FFYkEsRUFBUW9CLFdBQVczRCxLQUFxQixJQUFUeUMsRUFBZ0IsQ0FDL0NBLEdBQU8sRUFDUCxJQUFJcUIsRUFBYXBFLEVBQUUsNkJBQTZCUSxLQUFLLGdCQUNyRFIsRUFBRSxTQUFTMEMsT0FBTzBCLEdBQ2xCcEUsRUFBRSxrQkFBa0JxRSxTQUFTLGtCQUtyQ3JFLEVBQUVDLFVBQVVxRSxHQUFHLFFBQVMsU0FBVSxXQUM5QnRFLEVBQUUsa0JBQWtCaUYsUUFDcEJqRixFQUFFLGtCQUFrQmtGLE9BQ3BCbEYsRUFBRSxTQUFTaUYsUUFDWGpGLEVBQUUsa0JBQWtCbUYsWUFBWSxlQUNoQ3BDLEdBQU8sRUFDUEgsRUFBZSxHQUNmQyxFQUFRLEVBQ1JDLEVBQVksR0FDWjlDLEVBQUUsVUFBVVEsS0FBS3FDLEdBQ2pCekMsYUFBYWdGLFdBQVcsUUFDeEJuQyxFQUFPLEtBU1hqRCxFQUFFUyxLQUFLLENBQ0hDLElBQUssd0lBQTBJSCxFQUFPLGNBQWdCSixFQUN0S1EsT0FBUSxRQUNUQyxLQUFLLFNBQVVDLEdBRWQsSUFNSUMsRUFOZUQsRUFBU0UsVUFBVUMsT0FFR0MsT0FBTyxTQUFVQyxHQUN0RCxPQUFPQSxFQUFNQyxjQUcwQkYsT0FBTyxTQUFVQyxHQUN4RCxPQUFPQSxFQUFNQyxZQUFZLEdBQUdhLEtBQU8xQixJQUd2Q1EsRUFBaUJBLEVBQWVPLE1BQU0sRUFBRyxJQUVmckIsRUFBRSwwQ0FFUnNCLEtBQUssU0FBVUMsR0FDL0IsSUFBSUMsRUFBYVYsRUFBZVMsR0FBR0UsT0FBT0MsVUFBVSxTQUFVQyxHQUMxRCxPQUF1QixNQUFoQkEsRUFBTUMsUUFFYkMsRUFBYWYsRUFBZVMsR0FBR0UsT0FBT0QsR0FBWWQsSUFDbERvQixFQUFXaEIsRUFBZVMsR0FBR2IsSUFDN0JxQixFQUFhakIsRUFBZVMsR0FBR0osWUFBWSxHQUFHYSxJQUM5Q0MsRUFBWW5CLEVBQWVTLEdBQUdXLEtBQzlCQyxFQUFZckIsRUFBZVMsR0FBR2EsTUFBTUMsTUFBTUMsVUFFOUN0QyxFQUFFdUMsTUFBTUMsS0FBSyxPQUFPQyxLQUFLLE1BQU9aLEdBQ2hDN0IsRUFBRXVDLE1BQU1HLE9BQVIsOEJBQUFDLE9BQ2ViLEVBRGYsaURBQUFhLE9BQ3FFVixFQURyRSw4QkFBQVUsT0FFTVIsRUFGTiw2QkFBQVEsT0FHT1osRUFIUCx1R0FBQVksT0FHc0hkLEVBSHRILG9CQUFBYyxPQUdtSlYsRUFIbkoscUJBQUFVLE9BR2dMWixFQUhoTCxtQkFBQVksT0FHNE1iLEVBSDVNLG1FQ3JNWjlCLEVBQUVDLFVBQVVDLE1BQU0sV0FFZEYsRUFBRSxrQkFBa0JxRixNQUFNLFdBQ3RCakYsYUFBYWdGLFdBQVcsUUFDeEIsSUFBSUUsRUFBYXRGLEVBQUUsY0FBY3VGLE1BQzdCQyxFQUFleEYsRUFBRSxnQ0FBZ0N1RixNQUNqREUsRUFBYXpGLEVBQUUsY0FBY3VGLE1BSzdCRyxFQUhjLDJEQUdNQyxLQUFLTCxHQUV6QkksR0FDQTFGLEVBQUUsY0FBY21GLFlBQVksZUFDNUJuRixFQUFFLFdBQVdpRixRQUNiakYsRUFBRSxXQUFXeUMsS0FBSyxPQUFRLGlCQUMxQnJDLGFBQWEyRSxRQUFRLE9BQVFPLEtBRTdCdEYsRUFBRSxjQUFjcUUsU0FBUyxlQUN6QnJFLEVBQUUsY0FBY3lDLEtBQUssY0FBZSxjQUNwQ3pDLEVBQUUsV0FBV1EsS0FBSyx5QkFDbEJSLEVBQUUsV0FBV3lDLEtBQUssT0FBUSxLQUMxQnZCLE1BQU0wRSxtQkFJVkYsRUFsQnNCLDJCQWtCRUMsS0FBS0YsS0FHekJ6RixFQUFFLGNBQWNtRixZQUFZLGVBQzVCbkYsRUFBRSxXQUFXaUYsUUFDYmpGLEVBQUUsV0FBV3lDLEtBQUssT0FBUSxpQkFDMUJyQyxhQUFhMkUsUUFBUSxPQUFRVSxLQUU3QnpGLEVBQUUsY0FBY3FFLFNBQVMsZUFDekJyRSxFQUFFLFdBQVdRLEtBQUssZ0JBQ2xCUixFQUFFLFdBQVd5QyxLQUFLLE9BQVEsS0FDMUJ2QixNQUFNMEUsa0JBSVcsa0JBQWpCSixHQUNBeEYsRUFBRSxnQkFBZ0JxRSxTQUFTLGVBQzNCckUsRUFBRSxhQUFhUSxLQUFLLGlCQUNwQlIsRUFBRSxXQUFXeUMsS0FBSyxPQUFRLEtBQzFCdkIsTUFBTTBFLG1CQUVONUYsRUFBRSxnQkFBZ0JtRixZQUFZLGVBQzlCbkYsRUFBRSxhQUFhaUYsUUFDZmpGLEVBQUUsV0FBV3lDLEtBQUssT0FBUSxpQkFDMUJyQyxhQUFhMkUsUUFBUSxTQUFVUyxRQ25EM0N4RixFQUFFQyxVQUFVQyxNQUFNLFdBRWRGLEVBQUUsb0JBQW9CcUYsTUFBTSxXQUN4QnJGLEVBQUUsYUFBYTZGLFFBQVEsQ0FDbkJDLFVBQVc5RixFQUFFLHFCQUFxQitGLFNBQVNDLEtBRTNDLFVBR1JoRyxFQUFFLGlCQUFpQnFGLE1BQU0sV0FDckJyRixFQUFFLGFBQWE2RixRQUFRLENBQ25CQyxVQUFXOUYsRUFBRSxrQkFBa0IrRixTQUFTQyxLQUV4QyxVQUdSaEcsRUFBRSx3QkFBd0JxRixNQUFNLFdBQzVCckYsRUFBRSxhQUFhNkYsUUFBUSxDQUNuQkMsVUFBVzlGLEVBQUUseUJBQXlCK0YsU0FBU0MsS0FFL0MsVUFHUmhHLEVBQUUscUJBQXFCcUYsTUFBTSxXQUN6QnJGLEVBQUUsYUFBYTZGLFFBQVEsQ0FDbkJDLFVBQVc5RixFQUFFLGNBQWMrRixTQUFTQyxLQUVwQyxVQUdSaEcsRUFBRSxhQUFhcUYsTUFBTSxXQUNqQnJGLEVBQUUsYUFBYTZGLFFBQVEsQ0FDbkJDLFVBQVc5RixFQUFFLGtCQUFrQitGLFNBQVNDLEtBRXhDLFVBSVJoRyxFQUFFLGVBQWVxRixNQUFPLFdBQ3BCckYsRUFBRSxZQUFZaUcsUUFBUSxhQ2pDOUIsSUFBTUMsV0FBYSxDQUNmQyxTQUFVL0YsYUFBYUMsUUFBUSxRQUMvQitGLFVBQVdoRyxhQUFhQyxRQUFRLFdBRXBDZ0csUUFBVSxDQUNOckcsRUFBRyxFQUNIc0csR0FBSSxHQUNKQyxJQUFLLEdBQ0xDLEtBQU0sSUFLSkMsa0JBQW9CekcsRUFBRSxrQ0FNdEIwRyx3QkFBMEIsU0FBQ0MsR0FDN0IsT0FBT0EsRUFBVzFGLE9BQU8sU0FBQzJGLEdBQUQsT0FBY0EsRUFBUzdDLFNBSTlDOEMsbUJBQXFCLFNBQUNGLEdBQ3hCLElBQU1HLEVBQWVILEVBQVd0RixRQW9CaEMsT0FsQkF5RixFQUFhQyxLQUFLLFNBQUMxRCxFQUFHQyxHQUNsQixHQUFJQSxFQUFFMEQsT0FBUzNELEVBQUUyRCxPQUNiLE9BQVEsRUFDTCxHQUFJM0QsRUFBRTJELE9BQVMxRCxFQUFFMEQsT0FDcEIsT0FBTyxFQUdYLEdBQUkzRCxFQUFFVSxPQUFTVCxFQUFFUyxNQUFPLENBQ3BCLEdBQUlULEVBQUVTLE1BQVFWLEVBQUVVLE1BQ1osT0FBUSxFQUNMLEdBQUlWLEVBQUVVLE1BQVFULEVBQUVTLE1BQ25CLE9BQU8sRUFJZixPQUFPLElBR0orQyxFQUFhRyxPQUFPLEVBQUcsS0FJNUJDLDJCQUE2QixTQUFDUCxHQUNoQ0Ysa0JBQWtCbkYsS0FBSyxTQUFTa0MsR0FBTyxJQUFBMkQsRUFDU1IsRUFBV25ELEdBQWxEd0QsRUFEOEJHLEVBQzlCSCxPQUFRdEcsRUFEc0J5RyxFQUN0QnpHLElBQUswRyxFQURpQkQsRUFDakJDLFVBQVdyRCxFQURNb0QsRUFDTnBELE1BQU83QixFQUREaUYsRUFDQ2pGLEtBQ3BDNkIsRUFBUUEsRUFBUXNDLFFBQVF0QyxHQUFTLFdBRWpDL0QsRUFBRXVDLE1BQU1DLEtBQUssT0FBT0MsS0FBSyxNQUFPMkUsR0FDaENwSCxFQUFFdUMsTUFBTUcsT0FBUiw0REFBQUMsT0FFbUJqQyxFQUZuQiw0Q0FBQWlDLE9BRWlFVCxFQUZqRSxnRUFBQVMsT0FJOEJxRSxFQUo5Qiw4Q0FBQXJFLE9BSzhCb0IsRUFBTXNELFFBQVEsR0FMNUMscUhBQUExRSxPQU15R3lFLEVBTnpHLGtCQUFBekUsT0FNbUlULEVBTm5JLG1CQUFBUyxPQU15Sm9CLEVBTnpKLG1CQUFBcEIsT0FNZ0xqQyxFQU5oTCwyRUFhRjRHLGtDQUFvQyxTQUFDcEIsR0FDdkMsSUFBTXFCLEVBQWtCQyxVQUFVdEIsRUFBV0MsVUFDekN6RixFQUFHLG9HQUFBaUMsT0FBdUc0RSxHQUU5R3ZILEVBQUVTLEtBQUssQ0FDSEMsSUFBQUEsRUFDQUMsT0FBUSxNQUNSOEcsUUFBUyxDQUNMQyxjQUFlLDZJQUVwQjlHLEtBQUssU0FBQytHLEdBQ0MsSUFBQ2hCLEVBQWNnQixFQUFkaEIsV0FDUGlCLEVBQXVCbEIsd0JBQXdCQyxHQUMvQ2tCLEVBQW1CaEIsbUJBQW1CZSxHQUN0Q1YsMkJBQTJCVyxNQU1uQ1Asa0NBQWtDcEIiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAvLyB2YXJpYWJsZXMgZm9yIGFqYXggY2FsbCBcbiAgICAvLyB3aWxsIHJlcGxhY2Ugd2l0aCBqcXVlcnkgbG9jYXRvciwgdXNpbmcgcGxhY2Vob2xkZXIgZm9yIG5vdyBcbiAgICB2YXIgZGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZGF0ZVwiKTtcbiAgICB2YXIgYnVkZ2V0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJidWRnZXRcIik7XG4gICAgdmFyIGNpdHkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNpdHlcIik7XG5cbiAgICAkKFwiLnNob3ctYnVkZ2V0XCIpLnRleHQoYnVkZ2V0KTtcbiAgICAvL3RpY2tldG1hc3RlciBtdXNpYyBldmVudHMgXG4gICAgJC5hamF4KHtcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vYXBwLnRpY2tldG1hc3Rlci5jb20vZGlzY292ZXJ5L3YyL2V2ZW50cy5qc29uP2FwaWtleT02bUhyQVozQ1RScTFuS1ZpSmNoMHpNOGNNR0hQemF2NiZjbGFzc2lmaWNhdGlvbk5hbWU9bXVzaWMmc2l6ZT01MCZjaXR5PVwiICsgY2l0eSArIFwiJnN0YXJ0RGF0ZT1cIiArIGRhdGUsXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgdmFyIG11c2ljRXZlbnRzID0gcmVzcG9uc2UuX2VtYmVkZGVkLmV2ZW50cztcbiAgICAgICAgLy9jcmVhdGVzIGFycmF5IHdpdGggb25seSBldmVudHMgdGhhdCBoYXZlIHByaWNlIHJhbmdlcyBcbiAgICAgICAgdmFyIGV2ZW50c1dpdGhQcmljZVJhbmdlcyA9IG11c2ljRXZlbnRzLmZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudC5wcmljZVJhbmdlcztcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNyZWF0ZXMgYXJyYXkgd2l0aCBvbmx5IGV2ZW50cyB0aGF0IGhhdmUgYSBtYXggcHJpY2Ugd2l0aGluIHVzZXIgYnVkZ2V0IFxuICAgICAgICB2YXIgZXZlbnRzSW5CdWRnZXQgPSBldmVudHNXaXRoUHJpY2VSYW5nZXMuZmlsdGVyKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnByaWNlUmFuZ2VzWzBdLm1heCA8PSBidWRnZXQ7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjcmVhdGVzIGFycmF5IHdpdGggb25seSAxMiBldmVudHMgXG4gICAgICAgIGV2ZW50c0luQnVkZ2V0ID0gZXZlbnRzSW5CdWRnZXQuc2xpY2UoMCwgMTIpO1xuXG4gICAgICAgIHZhciBjb25jZXJ0Q2Fyb3VzZWxJdGVtcyA9ICQoXCIuY2Fyb3VzZWxDb25jZXJ0cyAuY2Fyb3VzZWwtaXRlbSAuY29uY2VydFwiKTtcblxuICAgICAgICBjb25jZXJ0Q2Fyb3VzZWxJdGVtcy5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgaW1hZ2VJbmRleCA9IGV2ZW50c0luQnVkZ2V0W2ldLmltYWdlcy5maW5kSW5kZXgoZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlLndpZHRoID09PSAyMDU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBldmVudEltYWdlID0gZXZlbnRzSW5CdWRnZXRbaV0uaW1hZ2VzW2ltYWdlSW5kZXhdLnVybDtcbiAgICAgICAgICAgIHZhciBldmVudFVybCA9IGV2ZW50c0luQnVkZ2V0W2ldLnVybDtcbiAgICAgICAgICAgIHZhciBldmVudFByaWNlID0gZXZlbnRzSW5CdWRnZXRbaV0ucHJpY2VSYW5nZXNbMF0ubWluO1xuICAgICAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGV2ZW50c0luQnVkZ2V0W2ldLm5hbWU7XG4gICAgICAgICAgICB2YXIgZXZlbnREYXRlID0gZXZlbnRzSW5CdWRnZXRbaV0uZGF0ZXMuc3RhcnQubG9jYWxEYXRlO1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIiwgZXZlbnRJbWFnZSk7XG4gICAgICAgICAgICAkKHRoaXMpLmFwcGVuZChgXG4gICAgICAgICAgICA8cD48YSBocmVmPSBcIiR7ZXZlbnRVcmx9XCIgY2xhc3M9XCJkYXRhLXVybC1saW5rXCIgdGFyZ2V0ID0gJ19ibGFuayc+JHtldmVudE5hbWV9PC9hPjwvcD5cbiAgICAgICAgICAgIDxoNT4ke2V2ZW50RGF0ZX08L2g1PiBcbiAgICAgICAgICAgIDxoNT4kJHtldmVudFByaWNlfTxidXR0b24gc3R5bGU9J21hcmdpbi1sZWZ0OiA3MHB4OycgY2xhc3MgPSBcImJ0biBidG4tc20gYnRuLW91dGxpbmUtZGFuZ2VyIGZhdm9yaXRlXCIgZXZlbnQtaW1hZ2UgPVwiJHtldmVudEltYWdlfVwiIGV2ZW50LW5hbWUgPSBcIiR7ZXZlbnROYW1lfVwiIGV2ZW50LXByaWNlID0gXCIke2V2ZW50UHJpY2V9XCIgZXZlbnQtdXJsID0gXCIke2V2ZW50VXJsfVwiPjxpIGNsYXNzPSdmYXIgZmEtaGVhcnQnPjwvaT48L2J1dHRvbj48L2g1PlxuICAgICAgICBgKTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgdmFyIGNob3NlblByaWNlcyA9IFtdO1xuICAgIHZhciB0b3RhbCA9IDA7XG4gICAgdmFyIGZhdm9yaXRlcyA9IHt9XG4gICAgdmFyIG92ZXIgPSBmYWxzZTtcbiAgICB2YXIgZmF2U3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmYXZzXCIpO1xuICAgIHZhciBmYXZzID0gZmF2U3RyaW5nID8gSlNPTi5wYXJzZShmYXZTdHJpbmcpIDogW107XG5cbiAgICAkKFwiLnRvdGFsXCIpLnRleHQodG90YWwpO1xuXG4gICAgaWYgKGZhdnMubGVuZ3RoID4gMCkge1xuICAgICAgICAkKGZhdnMpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgIHZhciAkZGl2ID0gJChcIjxkaXYgY2xhc3M9J2Nob3Nlbi1kaXYnPlwiKTtcbiAgICAgICAgICAgIHZhciAkY291bnRlciA9ICQoYDxzcGFuIGRhdGEtaWQ9XCIke2ZhdnNbaW5kZXhdLmNvdW50fVwiPmApO1xuICAgICAgICAgICAgdmFyICRmYXZJbWFnZSA9ICQoXCI8aW1nIGNsYXNzPSdpbWctcGlja2VkJyAvPlwiKS5hdHRyKFwic3JjXCIsIGZhdnNbaW5kZXhdLmltYWdlKTtcbiAgICAgICAgICAgIHZhciAkZmF2VGl0bGUgPSAkKGBcbiAgICAgICAgICAgICAgICA8aDYgY2xhc3M9XCJmYXZvcml0ZS10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIke2ZhdnNbaW5kZXhdLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj4ke2ZhdnNbaW5kZXhdLm5hbWV9PC9hPlxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9oNj5cbiAgICAgICAgICAgIGApXG4gICAgICAgICAgICB2YXIgJGZhdlByaWNlID0gJChgPGg2IGNsYXNzPVwiZmF2b3JpdGUtdGl0bGVcIj4kJHtmYXZzW2luZGV4XS5wcmljZX0geCAke2ZhdnNbaW5kZXhdLmNvdW50fTwvaDY+YCk7XG5cbiAgICAgICAgICAgICRmYXZQcmljZS5hcHBlbmQoJGNvdW50ZXIpO1xuICAgICAgICAgICAgJGRpdi5hdHRyKFwiY2hvc2VuLXByaWNlXCIsIGZhdnNbaW5kZXhdLnByaWNlKTtcbiAgICAgICAgICAgICRkaXYuYXBwZW5kKCRmYXZJbWFnZSwgJGZhdlRpdGxlLCAkZmF2UHJpY2UpO1xuXG4gICAgICAgICAgICBjaG9zZW5QcmljZXMucHVzaChwYXJzZUZsb2F0KGZhdnNbaW5kZXhdLnByaWNlICogZmF2c1tpbmRleF0uY291bnQpKTtcbiAgICAgICAgICAgIHRvdGFsID0gY2hvc2VuUHJpY2VzLnJlZHVjZShhZGQsIDApO1xuICAgICAgICAgICAgJChcIi50b3RhbFwiKS50ZXh0KHRvdGFsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKFwiLnBpY2tlZC1ldmVudHNcIikuYXBwZW5kKCRkaXYpO1xuICAgICAgICAgICAgJChcIi5waWNrZWQtZXZlbnRzXCIpLnNob3coKTtcblxuICAgICAgICAgICAgaWYgKHRvdGFsID4gcGFyc2VGbG9hdChidWRnZXQpICYmICFvdmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIG92ZXJCdWRnZXQgPSAkKFwiPHAgY2xhc3M9J2J1ZGdldCBvdmVyJz5cIikudGV4dChcIk92ZXIgQnVkZ2V0IVwiKTtcbiAgICAgICAgICAgICAgICBvdmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKFwiLmJ1ZGdldFwiKS5hcHBlbmQob3ZlckJ1ZGdldCk7XG4gICAgICAgICAgICAgICAgJChcIi5waWNrZWQtZXZlbnRzXCIpLmFkZENsYXNzKFwib3Zlci1idWRnZXRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgXCIuZmF2b3JpdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiLnBpY2tlZC1ldmVudHNcIikuc2hvdygpO1xuICAgICAgICB2YXIgZXZlbnREaXYgPSAkKFwiPGRpdiBjbGFzcyA9IGNob3Nlbi1kaXY+XCIpO1xuICAgICAgICB2YXIgY291bnRlciA9ICQoXCI8c3BhbiBkYXRhLWlkID0gJ1wiICsgJCh0aGlzKS5hdHRyKFwiZXZlbnQtbmFtZVwiKS5yZXBsYWNlKFwiJ1wiLCBcIlwiKSArIFwiJz5cIik7XG4gICAgICAgIHZhciBldmVudENob3NlbiA9ICQoXCI8aW1nIGNsYXNzID0gJ2ltZy1waWNrZWQnPlwiKS5hdHRyKFwic3JjXCIsICQodGhpcykuYXR0cihcImV2ZW50LWltYWdlXCIpKTtcbiAgICAgICAgdmFyIGV2ZW50VGl0bGUgPSAkKFwiPGg2IGNsYXNzID0gJ2Zhdm9yaXRlLXRpdGxlJz5cIikuYXBwZW5kKGBcbiAgICAgICAgPHA+PGEgY2xhc3MgPSBcImRhdGEtdXJsLWxpbmstMlwiIGhyZWY9IFwiJHskKHRoaXMpLmF0dHIoXCJldmVudC11cmxcIil9XCIgdGFyZ2V0ID0gJ19ibGFuayc+JHskKHRoaXMpLmF0dHIoXCJldmVudC1uYW1lXCIpfTwvYT48L3A+IFxuICAgICAgICBgKTtcbiAgICAgICAgdmFyIGV2ZW50UHJpY2UgPSAkKFwiPGg2IGNsYXNzID0gJ2Zhdm9yaXRlLXRpdGxlJz5cIikudGV4dCgnJCcgKyAkKHRoaXMpLmF0dHIoXCJldmVudC1wcmljZVwiKSArIFwiIHggXCIpO1xuICAgICAgICBldmVudFByaWNlLmFwcGVuZChjb3VudGVyKTtcbiAgICAgICAgZXZlbnREaXYuYXR0cihcImNob3Nlbi1wcmljZVwiLCAkKHRoaXMpLmF0dHIoXCJldmVudC1wcmljZVwiKSk7XG4gICAgICAgIGV2ZW50RGl2LmFwcGVuZChldmVudENob3NlbiwgZXZlbnRUaXRsZSwgZXZlbnRQcmljZSk7XG5cbiAgICAgICAgZmF2U3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmYXZzXCIpO1xuICAgICAgICBmYXZzID0gZmF2U3RyaW5nID8gSlNPTi5wYXJzZShmYXZTdHJpbmcpIDogZmF2cztcblxuICAgICAgICB2YXIgZXZlbnROYW1lU3RyaW5nID0gJCh0aGlzKS5hdHRyKFwiZXZlbnQtbmFtZVwiKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudE5hbWVTdHJpbmcgaW4gZmF2b3JpdGVzICYmIGZhdm9yaXRlcy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWVTdHJpbmcpKSB7XG4gICAgICAgICAgICBmYXZvcml0ZXNbZXZlbnROYW1lU3RyaW5nXSsrO1xuICAgICAgICAgICAgJChcInNwYW5bZGF0YS1pZCA9ICdcIiArIGV2ZW50TmFtZVN0cmluZy5yZXBsYWNlKFwiJ1wiLFwiXCIpK1wiJ11cIikudGV4dChmYXZvcml0ZXNbZXZlbnROYW1lU3RyaW5nXSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGZhdnMuZmluZEluZGV4KChmYXYpID0+IGZhdi5uYW1lID09PSBldmVudE5hbWVTdHJpbmcpO1xuICAgICAgICAgICAgZmF2c1tpbmRleF0uY291bnQgKz0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZhdm9yaXRlc1tldmVudE5hbWVTdHJpbmddID0gMTtcbiAgICAgICAgICAgICQoXCIucGlja2VkLWV2ZW50c1wiKS5hcHBlbmQoZXZlbnREaXYpO1xuICAgICAgICAgICAgY291bnRlci50ZXh0KGZhdm9yaXRlc1tldmVudE5hbWVTdHJpbmddKTtcblxuICAgICAgICAgICAgZmF2cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbWFnZTogJCh0aGlzKS5hdHRyKFwiZXZlbnQtaW1hZ2VcIiksXG4gICAgICAgICAgICAgICAgbmFtZTogZXZlbnROYW1lU3RyaW5nLFxuICAgICAgICAgICAgICAgIHByaWNlOiAkKHRoaXMpLmF0dHIoXCJldmVudC1wcmljZVwiKSxcbiAgICAgICAgICAgICAgICB1cmw6ICQodGhpcykuYXR0cihcImV2ZW50LXVybFwiKSxcbiAgICAgICAgICAgICAgICBjb3VudDogZmF2b3JpdGVzW2V2ZW50TmFtZVN0cmluZ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmYXZzXCIsIEpTT04uc3RyaW5naWZ5KGZhdnMpKTsgIFxuXG4gICAgICAgIGNvdW50ZXIudGV4dChmYXZvcml0ZXNbJCh0aGlzKS5hdHRyKFwiZXZlbnQtbmFtZVwiKV0pO1xuICAgICAgICAvLyB1cGRhdGUgdG90YWwgZXZlcnkgdGltZSBhIG5ldyBldmVudCBpcyBhZGRlZCB0byBmYXZvcml0ZXMgXG4gICAgICAgIGNob3NlblByaWNlcy5wdXNoKHBhcnNlRmxvYXQoZXZlbnREaXYuYXR0cihcImNob3Nlbi1wcmljZVwiKSkpO1xuICAgICAgICB0b3RhbCA9IGNob3NlblByaWNlcy5yZWR1Y2UoYWRkLCAwKTtcbiAgICAgICAgJChcIi50b3RhbFwiKS50ZXh0KHRvdGFsKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0b3RhbCA+IHBhcnNlRmxvYXQoYnVkZ2V0KSAmJiAob3ZlciA9PT0gZmFsc2UpKXtcbiAgICAgICAgICAgIG92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG92ZXJCdWRnZXQgPSAkKFwiPHAgY2xhc3MgPSAnYnVkZ2V0IG92ZXInPlwiKS50ZXh0KFwiT3ZlciBCdWRnZXQhXCIpO1xuICAgICAgICAgICAgJChcIi5vdmVyXCIpLmFwcGVuZChvdmVyQnVkZ2V0KTtcbiAgICAgICAgICAgICQoXCIucGlja2VkLWV2ZW50c1wiKS5hZGRDbGFzcyhcIm92ZXItYnVkZ2V0XCIpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICBcbiAgICBcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwiLmNsZWFyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIi5waWNrZWQtZXZlbnRzXCIpLmVtcHR5KCk7XG4gICAgICAgICQoXCIucGlja2VkLWV2ZW50c1wiKS5oaWRlKCk7XG4gICAgICAgICQoXCIub3ZlclwiKS5lbXB0eSgpO1xuICAgICAgICAkKFwiLnBpY2tlZC1ldmVudHNcIikucmVtb3ZlQ2xhc3MoXCJvdmVyLWJ1ZGdldFwiKTtcbiAgICAgICAgb3ZlciA9IGZhbHNlO1xuICAgICAgICBjaG9zZW5QcmljZXMgPSBbXTtcbiAgICAgICAgdG90YWwgPSAwO1xuICAgICAgICBmYXZvcml0ZXMgPSB7fTtcbiAgICAgICAgJChcIi50b3RhbFwiKS50ZXh0KHRvdGFsKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJmYXZzXCIpO1xuICAgICAgICBmYXZzID0gW107XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGFkZChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICsgYjtcbiAgICB9XG5cblxuICAgIC8vIHRpY2tldG1hc3RlciBzcG9ydHMgZXZlbnRzIFxuICAgICQuYWpheCh7XG4gICAgICAgIHVybDogXCJodHRwczovL2FwcC50aWNrZXRtYXN0ZXIuY29tL2Rpc2NvdmVyeS92Mi9ldmVudHMuanNvbj9hcGlrZXk9dWdYUlNmdjhpUkljaXhmOFhiaVNyRDBpSWdZZ09IRnEmY2xhc3NpZmljYXRpb25OYW1lPXNwb3J0cyZzaXplPTUwJmNpdHk9XCIgKyBjaXR5ICsgXCImc3RhcnREYXRlPVwiICsgZGF0ZSxcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICB2YXIgc3BvcnRzRXZlbnRzID0gcmVzcG9uc2UuX2VtYmVkZGVkLmV2ZW50cztcblxuICAgICAgICB2YXIgZXZlbnRzV2l0aFByaWNlUmFuZ2VzID0gc3BvcnRzRXZlbnRzLmZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudC5wcmljZVJhbmdlcztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGV2ZW50c0luQnVkZ2V0ID0gZXZlbnRzV2l0aFByaWNlUmFuZ2VzLmZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBldmVudC5wcmljZVJhbmdlc1swXS5taW4gPD0gYnVkZ2V0O1xuICAgICAgICB9KTtcblxuICAgICAgICBldmVudHNJbkJ1ZGdldCA9IGV2ZW50c0luQnVkZ2V0LnNsaWNlKDAsIDEyKTtcblxuICAgICAgICB2YXIgc3BvcnRzQ2Fyb3VzZWxJdGVtcyA9ICQoXCIuY2Fyb3VzZWxTcG9ydHMgLmNhcm91c2VsLWl0ZW0gLnNwb3J0c1wiKTtcblxuICAgICAgICBzcG9ydHNDYXJvdXNlbEl0ZW1zLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZUluZGV4ID0gZXZlbnRzSW5CdWRnZXRbaV0uaW1hZ2VzLmZpbmRJbmRleChmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2Uud2lkdGggPT09IDIwNTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGV2ZW50SW1hZ2UgPSBldmVudHNJbkJ1ZGdldFtpXS5pbWFnZXNbaW1hZ2VJbmRleF0udXJsO1xuICAgICAgICAgICAgdmFyIGV2ZW50VXJsID0gZXZlbnRzSW5CdWRnZXRbaV0udXJsO1xuICAgICAgICAgICAgdmFyIGV2ZW50UHJpY2UgPSBldmVudHNJbkJ1ZGdldFtpXS5wcmljZVJhbmdlc1swXS5taW47XG4gICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gZXZlbnRzSW5CdWRnZXRbaV0ubmFtZTtcbiAgICAgICAgICAgIHZhciBldmVudERhdGUgPSBldmVudHNJbkJ1ZGdldFtpXS5kYXRlcy5zdGFydC5sb2NhbERhdGU7XG5cbiAgICAgICAgICAgICQodGhpcykuZmluZChcImltZ1wiKS5hdHRyKFwic3JjXCIsIGV2ZW50SW1hZ2UpO1xuICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoYFxuICAgICAgICAgICAgPHA+PGEgaHJlZj0gXCIke2V2ZW50VXJsfVwiIGNsYXNzID1cImRhdGEtdXJsLWxpbmtcIiB0YXJnZXQgPSAnX2JsYW5rJz4ke2V2ZW50TmFtZX08L2E+PC9wPlxuICAgICAgICAgICAgPGg1PiR7ZXZlbnREYXRlfTwvaDU+IFxuICAgICAgICAgICAgPGg1PiQke2V2ZW50UHJpY2V9PGJ1dHRvbiBzdHlsZT0nbWFyZ2luLWxlZnQ6IDcwcHg7JyBjbGFzcyA9ICdidG4gYnRuLXNtIGJ0bi1vdXRsaW5lLWRhbmdlciBmYXZvcml0ZScgZXZlbnQtaW1hZ2UgPVwiJHtldmVudEltYWdlfVwiIGV2ZW50LW5hbWUgPSBcIiR7ZXZlbnROYW1lfVwiIGV2ZW50LXByaWNlID0gXCIke2V2ZW50UHJpY2V9XCIgZXZlbnQtdXJsID0gXCIke2V2ZW50VXJsfVwiPjxpIGNsYXNzPSdmYXIgZmEtaGVhcnQnPjwvaT48L2J1dHRvbj4gPC9oNT5cbiAgICAgICAgYCk7XG5cblxuICAgICAgICB9KTtcblxuXG4gICAgfSlcblxuXG5cblxuXG59KTtcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbi8vIFNhdmVzIHVzZXIgaW5wdXQgd2hlbiBzdWJtaXQgYnV0dG9uIGlzIGNsaWNrZWRcbiAgICAkKFwiI3N1Ym1pdF9idXR0b25cIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJmYXZzXCIpO1xuICAgICAgICB2YXIgZGF0ZV9pbnB1dCA9ICQoXCIjZGF0ZUlucHV0XCIpLnZhbCgpO1xuICAgICAgICB2YXIgYnVkZ2V0X2lucHV0ID0gJChcIiNidWRnZXRJbnB1dCBvcHRpb246c2VsZWN0ZWRcIikudmFsKCk7XG4gICAgICAgIHZhciBjaXR5X2lucHV0ID0gJChcIiNjaXR5SW5wdXRcIikudmFsKCk7XG5cbiAgICAgICAgdmFyIGRhdGVQYXR0ZXJuID0gL15cXGR7NH1cXC0oMFsxLTldfDFbMC0yXSlcXC0oMFsxLTldfDFbMC05XXwyWzAtOV18M1swLTFdKSQvaVxuICAgICAgICB2YXIgbG9jYXRpb25QYXR0ZXJuID0gL15cXHd7Mix9KFxcc1xcd3syLH0pezAsMn0kL2k7XG4gICAgICAgIFxuICAgICAgICB2YXIgdmFsaWQgPSBkYXRlUGF0dGVybi50ZXN0KGRhdGVfaW5wdXQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICAkKFwiI2RhdGVJbnB1dFwiKS5yZW1vdmVDbGFzcyhcIndyb25nLWlucHV0XCIpO1xuICAgICAgICAgICAgJChcIi5jLWRhdGVcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICQoXCIuc3VibWl0XCIpLmF0dHIoXCJocmVmXCIsIFwiaG9tZXBhZ2UuaHRtbFwiKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJkYXRlXCIsIGRhdGVfaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNkYXRlSW5wdXRcIikuYWRkQ2xhc3MoXCJ3cm9uZy1pbnB1dFwiKTtcbiAgICAgICAgICAgICQoXCIjZGF0ZUlucHV0XCIpLmF0dHIoXCJwbGFjZWhvbGRlclwiLCBcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAkKFwiLmMtZGF0ZVwiKS50ZXh0KFwiSW5jb3JyZWN0IGRhdGUgZm9ybWF0XCIpO1xuICAgICAgICAgICAgJChcIi5zdWJtaXRcIikuYXR0cihcImhyZWZcIiwgXCIjXCIpXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgICAgIHZhbGlkID0gbG9jYXRpb25QYXR0ZXJuLnRlc3QoY2l0eV9pbnB1dCk7XG5cbiAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICAkKFwiI2NpdHlJbnB1dFwiKS5yZW1vdmVDbGFzcyhcIndyb25nLWlucHV0XCIpO1xuICAgICAgICAgICAgJChcIi5jLWNpdHlcIikuZW1wdHkoKTtcbiAgICAgICAgICAgICQoXCIuc3VibWl0XCIpLmF0dHIoXCJocmVmXCIsIFwiaG9tZXBhZ2UuaHRtbFwiKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjaXR5XCIsIGNpdHlfaW5wdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNjaXR5SW5wdXRcIikuYWRkQ2xhc3MoXCJ3cm9uZy1pbnB1dFwiKTtcbiAgICAgICAgICAgICQoXCIuYy1jaXR5XCIpLnRleHQoXCJJbnZhbGlkIGNpdHlcIik7XG4gICAgICAgICAgICAkKFwiLnN1Ym1pdFwiKS5hdHRyKFwiaHJlZlwiLCBcIiNcIilcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChidWRnZXRfaW5wdXQgPT09IFwiU2VsZWN0IGJ1ZGdldFwiKXtcbiAgICAgICAgICAgICQoXCIjYnVkZ2V0SW5wdXRcIikuYWRkQ2xhc3MoXCJ3cm9uZy1pbnB1dFwiKTtcbiAgICAgICAgICAgICQoXCIuYy1idWRnZXRcIikudGV4dChcIkNob29zZSBCdWRnZXRcIik7XG4gICAgICAgICAgICAkKFwiLnN1Ym1pdFwiKS5hdHRyKFwiaHJlZlwiLCBcIiNcIilcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI2J1ZGdldElucHV0XCIpLnJlbW92ZUNsYXNzKFwid3JvbmctaW5wdXRcIik7XG4gICAgICAgICAgICAkKFwiLmMtYnVkZ2V0XCIpLmVtcHR5KCk7XG4gICAgICAgICAgICAkKFwiLnN1Ym1pdFwiKS5hdHRyKFwiaHJlZlwiLCBcImhvbWVwYWdlLmh0bWxcIilcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYnVkZ2V0XCIsIGJ1ZGdldF9pbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICAgICAgXG4gICAgfSk7XG59KTtcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuICAgICQoXCIubmF2LXJlc3RhdXJhbnRzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCIubmF2Mi1yZXN0YXVyYW50c1wiKS5vZmZzZXQoKS50b3BcbiAgICAgICAgfSxcbiAgICAgICAgICAgICdzbG93Jyk7XG4gICAgfSk7XG5cbiAgICAkKFwiLm5hdi1jb25jZXJ0c1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKFwiLm5hdjItY29uY2VydHNcIikub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sXG4gICAgICAgICAgICAnc2xvdycpO1xuICAgIH0pO1xuXG4gICAgJChcIi5uYXYtc3BvcnRpbmctZXZlbnRzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCIubmF2Mi1zcG9ydGluZy1ldmVudHNcIikub2Zmc2V0KCkudG9wXG4gICAgICAgIH0sXG4gICAgICAgICAgICAnc2xvdycpO1xuICAgIH0pO1xuXG4gICAgJChcIi5kYXRhLWhvbWUtZm9vdGVyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnaHRtbCxib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCIuZGF0YS1ob21lXCIpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LFxuICAgICAgICAgICAgJ3Nsb3cnKTtcbiAgICB9KTtcblxuICAgICQoXCIubmF2LWNhcnRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogJChcIi5zaG9wcGluZy1jYXJ0XCIpLm9mZnNldCgpLnRvcFxuICAgICAgICB9LFxuICAgICAgICAgICAgJ3Nsb3cnKTtcbiAgICB9KTtcblxuXG4gICAgJCgnLmRpc2NsYWltZXInKS5jbGljayAoZnVuY3Rpb24gKCkge1xuICAgICAgICAkKCcjbXlJbnB1dCcpLnRyaWdnZXIoJ2ZvY3VzJylcbiAgICB9KVxuXG5cbn0pO1xuIiwiLyoqXG4gKiBZZWxwIEFQSSBSZXF1ZXN0ICYgSW5mb3JtYXRpb24gQ29sbGVjdGlvblxuICovXG5cbi8vIFZhcmlhYmxlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5jb25zdCB1c2VyUGFyYW1zID0ge1xuICAgIGxvY2F0aW9uOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNpdHlcIiksXG4gICAgbWF4QnVkZ2V0OiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImJ1ZGdldFwiKVxufSxcbmRvbGxhcnMgPSB7XG4gICAgJDogOCxcbiAgICAkJDogMTUsXG4gICAgJCQkOiA0MCxcbiAgICAkJCQkOiA2MVxufTtcblxuLy8gRE9NIFNlbGVjdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuY29uc3QgcmVzdGF1cmFudENvbHVtbnMgPSAkKFwiLmNhcm91c2VsUmVzdGF1cmFudHMgLmJ1c2luZXNzXCIpO1xuXG4vLyBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuXG4vLyBHZXQgYnVzaW5lc3NlcyB3aXRoIHByaWNlcyAtLT5cbmNvbnN0IGdldEJ1c2luZXNzZXNXaXRoUHJpY2VzID0gKGJ1c2luZXNzZXMpID0+IHtcbiAgICByZXR1cm4gYnVzaW5lc3Nlcy5maWx0ZXIoKGJ1c2luZXNzKSA9PiBidXNpbmVzcy5wcmljZSk7XG59XG5cbi8vIFNvcnQgeWVscCBidXNpbmVzc2VzIC0tPlxuY29uc3Qgc29ydFllbHBCdXNpbmVzc2VzID0gKGJ1c2luZXNzZXMpID0+IHtcbiAgICBjb25zdCBieUJlc3RSYXRpbmcgPSBidXNpbmVzc2VzLnNsaWNlKCk7XG5cbiAgICBieUJlc3RSYXRpbmcuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYi5yYXRpbmcgPCBhLnJhdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2UgaWYgKGEucmF0aW5nIDwgYi5yYXRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGEucHJpY2UgJiYgYi5wcmljZSkge1xuICAgICAgICAgICAgaWYgKGIucHJpY2UgPiBhLnByaWNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhLnByaWNlID4gYi5wcmljZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gMDtcbiAgICB9KTsgICAgICAgIFxuICAgIFxuICAgIHJldHVybiBieUJlc3RSYXRpbmcuc3BsaWNlKDAsIDEyKTtcbn07XG5cbi8vIEFwcGVuZCB5ZWxwIGJ1c2luZXNzIGVsZW1lbnRzIC0tPlxuY29uc3QgYXBwZW5kWWVscEJ1c2luZXNzRWxlbWVudHMgPSAoYnVzaW5lc3NlcykgPT4ge1xuICAgIHJlc3RhdXJhbnRDb2x1bW5zLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgbGV0IHtyYXRpbmcsIHVybCwgaW1hZ2VfdXJsLCBwcmljZSwgbmFtZX0gPSBidXNpbmVzc2VzW2luZGV4XTtcbiAgICAgICAgcHJpY2UgPSBwcmljZSA/IGRvbGxhcnNbcHJpY2VdIDogXCJObyBQcmljZVwiO1xuICAgICAgICBcbiAgICAgICAgJCh0aGlzKS5maW5kKFwiaW1nXCIpLmF0dHIoXCJzcmNcIiwgaW1hZ2VfdXJsKTtcbiAgICAgICAgJCh0aGlzKS5hcHBlbmQoYFxuICAgICAgICAgICAgPHAgY2xhc3M9XCJteS0wXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiR7dXJsfVwiIGNsYXNzPVwiZGF0YS11cmwtbGlua1wiIHRhcmdldD1cIl9ibGFua1wiPiR7bmFtZX08L2E+XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8cCBjbGFzcz1cIm15LTBcIj5SYXRpbmc6ICR7cmF0aW5nfTwvcD5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwibXktMFwiPlByaWNlOiAkJHtwcmljZS50b0ZpeGVkKDIpfVxuICAgICAgICAgICAgICAgIDxidXR0b24gc3R5bGU9XCJtYXJnaW4tbGVmdDogNzBweDtcIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLW91dGxpbmUtZGFuZ2VyIGZhdm9yaXRlXCIgZXZlbnQtaW1hZ2U9XCIke2ltYWdlX3VybH1cIiBldmVudC1uYW1lPVwiJHtuYW1lfVwiIGV2ZW50LXByaWNlPVwiJHtwcmljZX1cIiBldmVudC11cmwgPSBcIiR7dXJsfVwiPjxpIGNsYXNzPVwiZmFyIGZhLWhlYXJ0XCI+PC9pPjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9wPlxuICAgICAgICBgKTtcbiAgICB9KTtcbn07XG5cbi8vIEdldCwgc29ydCwgY3JlYXRlICYgZGlzcGxheSB5ZWxwIGJ1c2luZXNzIGVsZW1lbnRzIC0tPlxuY29uc3QgZ2V0U29ydENyZWF0ZVllbHBCdXNpbmVzc0VsZW1lbnRzID0gKHVzZXJQYXJhbXMpID0+IHtcbiAgICBjb25zdCBlbmNvZGVkTG9jYXRpb24gPSBlbmNvZGVVUkkodXNlclBhcmFtcy5sb2NhdGlvbiksXG4gICAgICAgIHVybCA9IGBodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL2FwaS55ZWxwLmNvbS92My9idXNpbmVzc2VzL3NlYXJjaD90ZXJtPWZvb2QmbG9jYXRpb249JHtlbmNvZGVkTG9jYXRpb259YDtcblxuICAgICQuYWpheCh7XG4gICAgICAgIHVybCxcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBFSnZiSFppSXM1T21QMmk1akVQQWpLMEtCXzI5V2Z4MzJGU2xpNFladkNWbTRHazZObzBhaFRuSVRha0UzWGR5U2Q1b1ZCclZBQU1uT0lla1FVZTRkVFJiUkxzUkZwLS1ORDlCUHVZN1diQnFpR2NzdWxxbHU2WEkzb1dSVzNZeFwiXG4gICAgICAgIH1cbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc3Qge2J1c2luZXNzZXN9ID0gcmVzLFxuICAgICAgICBidXNpbmVzc2VzV2l0aFByaWNlcyA9IGdldEJ1c2luZXNzZXNXaXRoUHJpY2VzKGJ1c2luZXNzZXMpLFxuICAgICAgICBzb3J0ZWRCdXNpbmVzc2VzID0gc29ydFllbHBCdXNpbmVzc2VzKGJ1c2luZXNzZXNXaXRoUHJpY2VzKTtcbiAgICAgICAgYXBwZW5kWWVscEJ1c2luZXNzRWxlbWVudHMoc29ydGVkQnVzaW5lc3Nlcyk7XG4gICAgfSk7XG59O1xuXG4vLyBNYWluXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbmdldFNvcnRDcmVhdGVZZWxwQnVzaW5lc3NFbGVtZW50cyh1c2VyUGFyYW1zKTtcbiJdfQ==
